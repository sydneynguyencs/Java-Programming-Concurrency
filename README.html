<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Praktikum Concurrency</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1><span class="image right"><img src="./images/PROG2-300x300.png" alt="IT.PROG2" width="100" height="100"></span> Praktikum Concurrency</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_einleitung">Einleitung</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Das folgende Praktikum umfasst einen relativ grossen Themenblock, der im Unterricht rund vier Wochen umfasst. Da das Praktikum startet, bevor sie den ganzen Stoff kennen, ist das Praktikum in die vier Vorlesungsthemen gegliedert. D.h. Sie können jeweils bis zu dem Teil lösen, der im Unterricht schon behandelt wurde.</em></p>
</div>
<div class="paragraph">
<p><em>Zudem gibt es in diesem Praktikum mehrere kleinere Pflichtaufgaben, mit [PA] gekennzeichnet sind.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ziele">Ziele</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ziele dieses Praktikums sind:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sie verstehen die Grundlagen von Nebenläufigkeit</p>
</li>
<li>
<p>Sie können mehrere Java-Threads starten, kontrollieren und sauber beenden.</p>
</li>
<li>
<p>Sie können das Zustandsmodell von Threads erkären und wissen, welche Mechanismen den Wechsel der Zustände veranlassen.</p>
</li>
<li>
<p>Sie können die verschiedenen Mechanismen zur Thread-Synchronisation sicher anwenden (Mutual-Exclusion, Condition-Synchronisation).</p>
</li>
<li>
<p>Sie können das Monitor-Konzept (wait/notify, Lock &amp; Conditions in Java anwenden.</p>
</li>
<li>
<p>Sie können Producer-Consumer Synchronisation praktisch anwenden.</p>
</li>
<li>
<p>Sie wissen was wie Deadlocks praktisch verhindert werden können.</p>
</li>
<li>
<p>Sie können die modernen Java-Hilfsmittel zum parallelen Ausführen von nebenläufigen Jobs praktisch anwenden.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_voraussetzungen">Voraussetzungen</h3>
<div class="ulist">
<ul>
<li>
<p>Vorlesung Concurrency 1 bis 4</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_tooling">Tooling</h3>
<div class="ulist">
<ul>
<li>
<p>Installiertes JDK 11+</p>
</li>
<li>
<p>Gradle 6.1+</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_struktur">Struktur</h3>
<div class="paragraph">
<p>Das Praktikum enthält verschiedene Arten von Aufgaben, die wie folgt gekennzeichnet sind:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[TU] – Theoretische Übung</dt>
<dd>
<p>Dient der Repetition bzw. Vertiefung des Stoffes aus der Vorlesung und als Vorbereitung für die nachfolgenden Übungen.</p>
</dd>
<dt class="hdlist1">[PU] – Praktische Übung</dt>
<dd>
<p>Übungsaufgaben zur praktischen Vertiefung von Teilaspekten des behandelten Themas.</p>
</dd>
<dt class="hdlist1">[PA] – Pflichtaufgabe</dt>
<dd>
<p>Übergreifende Aufgabe zum Abschluss. Das Lösen dieser Aufgaben ist Pflicht. Sie muss bis zum definierten Zeitpunkt abgegeben werden, wird bewertet und ist Teil der Vornote.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_zeit_und_bewertung">Zeit und Bewertung</h3>
<div class="paragraph">
<p>Für das Praktikum stehen 3 Wochen in den Praktikumslektionen und im Selbststudium zur Verfügung.<br>
Je nach Kenntniss- und Erfahrungsstufe benötigen Sie mehr oder
weniger Zeit.
Nutzen Sie die Gelegenheit den Stoff und zu vertiefen, Auszuprobieren, Fragen zu stellen und Lösungen zu diskutieren (Intensive-Track).<br>
Falls Sie das Thema schon beherrschen müssen Sie nur die Pflichtaufgaben lösen und bis zum angegebenen Zeitpunkt abgeben (Fast-Track).</p>
</div>
<div class="paragraph">
<p>Die Pflichtaufgabe wird mit 0 bis 2 Punkten bewertet (siehe <em>Leistungsnachweise</em> auf Moodle).</p>
</div>
</div>
<div class="sect2">
<h3 id="_referenzen">Referenzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="./handout/">Praktkikumsverzeichnis – Quellcode, Projektstruktur</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concurrency_1java_threads">1. Concurrency 1&#8201;&#8212;&#8201;Java Threads</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_theoretische_fragen_tu">1.1. Theoretische Fragen [TU]</h3>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Im Unterricht haben Sie zwei Varianten kennengelernt um Threads zu erzeugen. Erläutern Sie jeweils, was für die Implementation spezifisch ist und wie die Thread-Instanz erzeugt und gestartet wird.</p>
</li>
<li>
<p>Erläutern Sie im nachfolgenden (vereinfachten) Thread-Zustandsmodell, was die aufgeführten Zustände bedeuten und ergänzen Sie die Mechanismen welche den Wechsel zwischen den Zuständen auslösen. Wenn vorhanden, geben Sie den entsprechenden Befehl an.</p>
<div class="imageblock">
<div class="content">
<img src="./images/Thread-State-Model.png" alt="Thread State Model" width="900px">
</div>
<div class="title">Figure 1. Thread Zustandsmodell (vereinfacht)</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_printer_threads_verwendung_von_java_threads_pu">1.2. Printer-Threads: Verwendung von Java Threads [PU]</h3>
<div class="paragraph">
<p>Nachfolgend einige Basisübungen zum Starten und Stoppen von Threads in Java.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Printer</span> {

    <span style="color:#777">// test program</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">void</span> main(<span style="color:#0a8;font-weight:bold">String</span><span style="color:#339;font-weight:bold">[]</span> arg) {
        PrinterThread a = <span style="color:#080;font-weight:bold">new</span> PrinterThread(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PrinterA</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">.</span><span style="color:#710">'</span></span>, <span style="color:#00D">10</span>);
        PrinterThread b = <span style="color:#080;font-weight:bold">new</span> PrinterThread(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PrinterB</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">*</span><span style="color:#710">'</span></span>, <span style="color:#00D">20</span>);
        a.start();
        b.start();
        b.run(); <span style="color:#777">// wie kann das abgefangen werden?</span>
    }


    <span style="color:#088;font-weight:bold">private</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PrinterThread</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Thread</span> {
        <span style="color:#339;font-weight:bold">char</span> symbol;
        <span style="color:#339;font-weight:bold">int</span> sleepTime;

        <span style="color:#088;font-weight:bold">public</span> PrinterThread(<span style="color:#0a8;font-weight:bold">String</span> name, <span style="color:#339;font-weight:bold">char</span> symbol, <span style="color:#339;font-weight:bold">int</span> sleepTime) {
            <span style="color:#950">super</span>(name);
            <span style="color:#950">this</span>.symbol = symbol;
            <span style="color:#950">this</span>.sleepTime = sleepTime;
        }

        <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> run() {
            <span style="color:#0a8;font-weight:bold">System</span>.out.println(getName() + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20"> run started...</span><span style="color:#710">&quot;</span></span>);
            <span style="color:#080;font-weight:bold">for</span> (<span style="color:#339;font-weight:bold">int</span> i = <span style="color:#00D">1</span>; i &lt; <span style="color:#00D">100</span>; i++) {
                <span style="color:#0a8;font-weight:bold">System</span>.out.print(symbol);
                <span style="color:#080;font-weight:bold">try</span> {
                    <span style="color:#0a8;font-weight:bold">Thread</span>.sleep(sleepTime);
                } <span style="color:#080;font-weight:bold">catch</span> (<span style="color:#C00;font-weight:bold">InterruptedException</span> e) {
                    <span style="color:#0a8;font-weight:bold">System</span>.out.println(e.getMessage());
                }
            }
            <span style="color:#0a8;font-weight:bold">System</span>.out.println(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">\n</span><span style="color:#710">'</span></span> + getName() + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20"> run ended.</span><span style="color:#710">&quot;</span></span>);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Studieren Sie das Programm <code>Printer.java</code>: Die Methode <code>Thread.run()</code> ist
public und kann daher direkt aufgerufen werden. Erweitern Sie die Methode <code>run()</code>
so, dass diese sofort terminiert, wenn sie direkt und nicht vom Thread
aufgerufen wird. </p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Was liefert die Methode <code>Thread.currentThread()</code> zurück?
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Erstellen sie eine Kopie von <code>Printer.java</code> (z.B. <code>PrinterB.java</code>) und schreiben Sie das Programm so um, dass die run-Methode über das Interface
<code>Runnable</code> implementiert wird. <br>
Führen Sie dazu eine Klasse <code>PrinterRunnable</code> ein, die das Interface <code>Runnable</code>
implementiert.<br>
 Starten Sie zwei Threads, so dass die selbe Ausgabe entsteht wie bei (a).</p>
</li>
<li>
<p>Wie kann erreicht werden, dass die Fairness erhöht wird, d.h. dass der Wechsel
zwischen den Threads häufiger erfolgt? Wirkt es sich aufs Resultat aus?</p>
</li>
<li>
<p>Wie muss man das Hauptprogramm anpassen, damit der Main-Thread immer
als letztes endet?</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_thread_priority_pu">1.3. Thread Priority [PU]</h3>
<div class="paragraph">
<p>In dieser Aufgabe üben Sie als erstes wie ein endloss laufender Thread correkt von aussen beendet wird.
Zudem vermittelt diese Aufgabe  vermittelt einen Einblick in das Prioritätensystem der Java Threads.
Als Basis der Aufgabe dient die Klasse <code>PriorityTest.java</code>.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Als Erstes, ersetzen Sie die veraltete Methode <code>thread.stop()</code> durch eine "saubere" Variante die <code>SimpleThread</code>-Instanzen zu beenden. Dabei sollen sichergestellt werden, dass auch Threads beendet werden, die momentan gerade "pausiert" sind.</p>
</li>
<li>
<p>Mit Hilfe der Klasse soll das Verhalten von Java Threads mit verschiedenen Prioritäten analysiert werden.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Es kann sein, dass verschiedene Betriebssysteme und Java-Versionen sich
unterschiedlich verhalten <a href="http://www.javamex.com/tutorials/threads/priority.shtml" class="bare">http://www.javamex.com/tutorials/threads/priority.shtml</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Je nach Priorität im Bereich von <code>Thread.MIN_PRIORITY=1</code> über <code>Thread.NORM_PRIORITY=5</code>
bis <code>Thread.MAX_PRIORITY=10</code>, sollte der Thread vom Scheduler bevorzugt behandelt
werden, d.h. der Zähler <code>count</code> sollte häufiger inkrementiert werden.<br>
Kommentieren Sie dazu den <code>Thread.sleep()</code> <code>try-catch</code>-Block aus, um sicherzusstellen, dass damit der Thread nicht zum Freigeben der CPU gezwungen wird.</p>
</div>
<div class="paragraph">
<p>Folgende Fragen müssen abgeklärt und beantwortet werden:</p>
</div>
<div class="ulist loweralpha">
<ul class="loweralpha">
<li>
<p>Wie verhält es sich, wenn alle Threads die gleiche Priorität haben?</p>
</li>
<li>
<p>Was stellen Sie fest, wenn die Threads unterschiedliche Priorität haben?<br>
Erhöhen Sie auch die Anzahl Threads (z.B. 100), um eine Ressourcen-Knappheit
zu provozieren.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concurrency_2thread_synchronisation">2. Concurrency 2&#8201;&#8212;&#8201;Thread Synchronisation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_konto_übertrag_pu">2.1. Konto-Übertrag [PU]</h3>
<div class="paragraph">
<p>Nachfolgend eine einfache Klasse, um ein Konto zu verwalten, den Saldo abzufragen
oder zu aktualisieren.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Account</span> {
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> id;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> saldo = <span style="color:#00D">0</span>;

    <span style="color:#088;font-weight:bold">public</span> Account(<span style="color:#339;font-weight:bold">int</span> id, <span style="color:#339;font-weight:bold">int</span> initialAmount) {
        <span style="color:#950">this</span>.id = id;
        <span style="color:#950">this</span>.saldo = initialAmount;
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> getId() {
        <span style="color:#080;font-weight:bold">return</span> id;
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> getSaldo() {
        <span style="color:#080;font-weight:bold">return</span> saldo;
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> changeSaldo(<span style="color:#339;font-weight:bold">int</span> delta) {
        <span style="color:#950">this</span>.saldo += delta;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ein Entwickler implementiert aufbauend auf der Klasse Account eine Operation für
den Transfer eines Geldbetrages zwischen zwei Konti.
Die Klasse <code>AccountTransferThread</code> implementiert dazu die Methode <code>accountTransfer</code>,
welche in einer Schleife mehrfach aufgerufen wird, um viele kleine Transaktionen
zu simulieren. Das Testprogramm <code>AccountTransferTest</code> (siehe abgegebenen Code)
erzeugt schlussendlich mehrere Threads, die teilweise auf denselben Konto-Objekten
operieren.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Java"><span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">AccountTransferThread</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Thread</span> {

    <span style="color:#088;font-weight:bold">private</span> Account fromAccount;
    <span style="color:#088;font-weight:bold">private</span> Account toAccount;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> amount;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> maxIter = <span style="color:#00D">10000</span>;

    <span style="color:#088;font-weight:bold">public</span> AccountTransferThread(<span style="color:#0a8;font-weight:bold">String</span> name, Account fromAccount,
                                 Account toAccount, <span style="color:#339;font-weight:bold">int</span> amount)
    {
        <span style="color:#950">super</span>(name);
        <span style="color:#950">this</span>.fromAccount = fromAccount;
        <span style="color:#950">this</span>.toAccount = toAccount;
        <span style="color:#950">this</span>.amount = amount;
    }

    <span style="color:#777">/*  Transfer amount from fromAccount to toAccount */</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> accountTransfer() {
        <span style="color:#777">// Account must not be overdrawn</span>
        <span style="color:#080;font-weight:bold">if</span> (fromAccount.getSaldo() &gt;= amount) {
            fromAccount.changeSaldo(-amount);
            toAccount.changeSaldo(amount);
        }
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> run() {
        <span style="color:#080;font-weight:bold">for</span> (<span style="color:#339;font-weight:bold">int</span> i = <span style="color:#00D">0</span>; i &lt; maxIter; i++) {
            accountTransfer();
            <span style="color:#080;font-weight:bold">try</span> { <span style="color:#777">// simulation of work time</span>
                <span style="color:#0a8;font-weight:bold">Thread</span>.sleep((<span style="color:#339;font-weight:bold">int</span>) (<span style="color:#0a8;font-weight:bold">Math</span>.random() * <span style="color:#00D">10</span>));
            } <span style="color:#080;font-weight:bold">catch</span> (<span style="color:#C00;font-weight:bold">InterruptedException</span> e) {
                <span style="color:#0a8;font-weight:bold">System</span>.out.println(e.getMessage());
            }
        }
        <span style="color:#0a8;font-weight:bold">System</span>.out.println(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DONE! </span><span style="color:#710">&quot;</span></span> + getName());
    }
}</code></pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Was stellen Sie fest, wenn Sie das Testprogramm laufen lassen? 
Erklären Sie wie die Abweichungen zustande kommen.</p>
</li>
<li>
<p>Im Unterricht haben Sie gelernt, dass sie kritische Bereiche Ihres Codes durch
Mutual-Exclusion geschützt werden sollen. Wie macht man das in Java? <br>
Versuchen Sie mit Hilfe von Mutual-Exclusion sicher zu stellen, dass keine
Abweichungen entstehen.
Reicht es, wenn Sie die kritischen Methoden in Account schützen? <br>
Untersuchen Sie mehrere Varianten von Locks (Lock auf Methode oder Block,
Lock auf Instanz oder Klasse). <br>
Ihre Implementierung muss noch nebenläufige Transaktionen erlauben, d.h. wenn
Sie zu stark synchronisieren, werden alle Transaktionen in Serie ausgeführt und
Threads machen keinen Sinn mehr.<br>
 Stellen Sie für sich folgende Fragen:</p>
<div class="ulist">
<ul>
<li>
<p>Welches ist das Monitor-Objekt?</p>
</li>
<li>
<p>Braucht es eventuell das Lock von mehr als einen Monitor während der Transaktion?</p>
</li>
</ul>
</div>
</li>
<li>
<p>Wenn Sie es geschafft haben die Transaktion thread-safe zu
implementieren, ersetzen Sie in <code>AccountTransferTest</code> die die folgende Zeile :<br>
<code>AccountTransferThread t1 = new AccountTransferThread("Worker 1", account3, account1, 1); </code><br>
durch<br>
<code> AccountTransferThread t1 = new AccountTransferThread("Worker 1", account1, account3, 1);</code><br>
 und starten Sie das Programm noch einmal. Was stellen Sie fest?
(evtl. müssen Sie es mehrfach versuchen, damit der Effekt auftritt).<br>
Was könnte die Ursache sein und wie können Sie es beheben?<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Falls Sie die Frage noch nicht beantworten können, kommen sie nach der Vorlesung "Concurrency 3" nochmals auf diese Aufgabe zurück und versuchen Sie sie dann zu lösen.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_traffic_light_pu">2.2. Traffic Light [PU]</h3>
<div class="paragraph">
<p>In dieser Aufgabe sollen Sie die Funktionsweise einer Ampel und deren Nutzung nachahmen.
Benutzen Sie hierzu die Vorgabe <code>TrafficLightOperation.java</code>.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Ergänzen Sie zunächst in der Klasse <code>TrafficLight</code> drei Methoden:</p>
<div class="ulist">
<ul>
<li>
<p>Eine Methode zum Setzen der Ampel auf „rot“.</p>
</li>
<li>
<p>Eine Methode zum Setzen der Ampel auf „grün“.</p>
</li>
<li>
<p>Eine Methode mit dem Namen <code>passby()</code>. Diese Methode soll das Vorbeifahren
eines Fahrzeugs an dieser Ampel nachbilden: Ist die Ampel rot, so wird der
aufrufende Thread angehalten, und zwar so lange, bis die Ampel grün wird.
Ist die Ampel dagegen grün, so kann der Thread sofort aus der Methode zurückkehren,
ohne den Zustand der Ampel zu verändern. Verwenden Sie <code>wait</code>, <code>notify</code> und
<code>notifyAll</code> nur an den unbedingt nötigen Stellen!</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Die Zwischenphase „gelb“ spielt keine Rolle – Sie können diesem Zustand ignorieren!
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Erweitern Sie nun die Klasse <code>Car</code> (abgeleitet von <code>Thread</code>).
Im Konstruktor wird eine Referenz auf ein Feld von Ampeln übergeben.
Diese Referenz wird in einem entsprechenden Attribut der Klasse <code>Car</code> gespeichert.
In der run-Methode werden alle Ampeln dieses Feldes passiert, und zwar in einer Endlosschleife (d.h. nach dem Passieren der letzten Ampel des Feldes wird wieder die erste Ampel im Feld passiert).<br>
Natürlich darf das Auto erst dann eine Ampel passieren, wenn diese auf grün ist!<br>
Für die Simulation der Zeitspanne für das Passieren der des Signals können Sie die folgende Anweisung verwenden: <code>sleep((int)(Math.random() * 500));</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Beantworten Sie entweder (c) oder (d) (nicht beide):</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a" start="3">
<li>
<p>Falls Sie bei der Implementierung der Klasse TrafficLight die Methode
<code>notifyAll()</code> benutzt haben: Hätten Sie statt <code>notifyAll</code> auch die Methode <code>notify</code>
verwenden können, oder haben Sie <code>notifyAll()</code> unbedingt gebraucht?
 Begründen Sie Ihre Antwort!</p>
</li>
<li>
<p>Falls Sie bei der Implementierung der Klasse Ampel die Methode <code>notify()</code> benutzt
haben: Begründen Sie, warum Sie <code>notifyAll()</code> nicht unbedingt gebraucht haben!</p>
</li>
<li>
<p>Testen Sie das Programm <code>TrafficLightOperation.java</code>.
Die vorgegebene Klasse implementiert eine primitive Simulation von Autos, welche die Ampeln passieren.
Studieren Sie den Code dieser Klasse und überprüfen Sie, ob die erzeugte Ausgabe sinnvoll ist.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_producer_consumer_problem_pa">2.3. Producer-Consumer Problem [PA]</h3>
<div class="paragraph">
<p>In dieser Aufgabe wird ein Producer-Consumer Beispiel mit Hilfe einer Queue umgesetzt.</p>
</div>
<div class="paragraph">
<p>Dazu wird eine Implementation mittels eines <a href="https://en.wikipedia.org/wiki/Circular_buffer">Digitalen Ringspeichers</a> umgesetzt.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://en.wikipedia.org/wiki/Circular_buffer"><img src="./images/Circular_Buffer_Animation.gif" alt="Circular Buffer Animation" width="600px"></a>
</div>
<div class="title">Figure 2. Circular Buffer [Wikipedia]</div>
</div>
<div class="paragraph">
<p>Hierzu sind zwei Klassen (<code>CircularBuffer.java</code>, <code>Buffer.java</code>) vorgegeben, mit folgendem Design:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/CircularBuffer.png" alt="CircularBuffer" width="600px">
</div>
<div class="title">Figure 3. Circular Buffer Design</div>
</div>
<div class="sect3">
<h4 id="_erstellen_von_producer_und_consumer_threads">Erstellen von Producer- und Consumer-Threads</h4>
<div class="paragraph">
<p>Als erstes soll ein <em>Producer</em> und ein <em>Consumer</em> implementiert werden.
Nachfolgend ist das Gerüst für beide Klassen abgebildet (siehe <code>CircBufferTest.java</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Java"><span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Producer</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Thread</span> {
    <span style="color:#088;font-weight:bold">public</span> Producer(<span style="color:#0a8;font-weight:bold">String</span> name, <span style="color:#0a8;font-weight:bold">Buffer</span> buffer, <span style="color:#339;font-weight:bold">int</span> prodTime) {
        <span style="color:#777">// ...</span>
    }
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> run() {
        <span style="color:#777">// ...</span>
    }
}

<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Consumer</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Thread</span>
{
    <span style="color:#088;font-weight:bold">public</span> Consumer(<span style="color:#0a8;font-weight:bold">String</span> name, <span style="color:#0a8;font-weight:bold">Buffer</span> buffer, <span style="color:#339;font-weight:bold">int</span> consTime) {
        <span style="color:#777">// ...</span>
    }
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> run() {
        <span style="color:#777">// ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Producer soll Daten in den Buffer einfüllen, und der Consumer soll Daten
auslesen. Auf den Buffer soll nur über das Interface zugegriffen werden.
Das Zeitintervall, der ein Producer braucht um die Daten zu erstellen, ist mit
<code>sleep((int)(Math.random()*prodTime))</code> zu definieren. Die Zeit für verarbeitung des Consumers soll entsprechend mit <code>sleep((int)(Math.random() * consTime))</code> bestimmt werden.</p>
</div>
<div class="paragraph">
<p>Für Producer und Consumer wurde bereits ein Testprogramm (<code>CircBufferTest</code>) geschrieben.
Testen Sie damit ihre Consumer- und Producer-Klassen.
Versuchen sie den generierten Output auf der Console richtig zu interpretieren!
Spielen sie mit den Zeitintervallbereichen von Producer (<code>maxProdTime</code>) und
Consumer (<code>maxConsTime</code>) und ziehen sie Schlüsse.
Erstellen sie über die Modifikation von <code>prodCount</code> und <code>consCount</code> mehrere Producer bzw. Consumer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Generieren sie in den selber implementierten Klassen keine eigene Ausgabe.
Ändern sie den bestehenden Code nicht. Es stehen zwei Ausgabefunktionen zur
Auswahl: <code>printBufferContent()</code> und <code>printBufferSlots()</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_thread_safe_circular_buffer">Thread-Safe Circular Buffer</h4>
<div class="paragraph">
<p>In der vorangehenden Übung griffen mehrere Threads auf den gleichen Buffer zu.
Die Klasse CircularBuffer ist aber nicht thread-safe. Was wir gemacht haben, ist daher nicht tragbar.
Deshalb soll jetzt eine Wrapper Klasse geschrieben werden, welche die CircularBuffer-Klasse "thread-safe" macht.
Das führt zu folgendem Design:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GuardedCircularBuffer.png" alt="GuardedCircularBuffer" width="600px">
</div>
<div class="title">Figure 4. Guarded Circular Buffer Desing</div>
</div>
<div class="paragraph">
<p>Aufrufe von <code>put</code> blockieren, solange der Puffer voll ist, d.h., bis also mindestens wieder ein leeres Puffer-Element vorhanden ist.
Analog dazu blockieren Aufrufe von <code>get</code>, solange der Puffer leer ist, d.h, bis also mindestens ein Element im Puffer vorhanden ist.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Verwenden Sie den Java Monitor des <code>GuardedCircularBuffer</code>-Objektes!
Wenn die Klasse fertig implementiert ist, soll sie in der <code>CircBufferTest</code> Klasse verwendet werden.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Beantworten Sie entweder (a) oder (b) (nicht beide):</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Falls Sie bei der Implementierung der Klasse <code>GuardedCircularBuffer</code> die
Methode <code>notifyAll()</code> benutzt haben: Hätten Sie statt <code>notifyAll()</code> auch die
Methode <code>notify()</code> verwenden können oder haben Sie <code>notifyAll()</code> unbedingt
gebraucht? Begründen Sie Ihre Antwort!</p>
</li>
<li>
<p>Falls Sie bei der Implementierung der Klasse <code>GuardedCircularBuffer</code> die Methode <code>notify()</code> benutzt haben: Begründen Sie, warum Sie <code>notifyAll()</code> nicht unbedingt gebraucht haben!</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concurrency_3lock_conditions_deadlocks">3. Concurrency 3&#8201;&#8212;&#8201;Lock &amp; Conditions, Deadlocks</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_single_lane_bridge_pu">3.1. Single-Lane Bridge [PU]</h3>
<div class="paragraph">
<p>Die Brücke über einen Fluss ist so schmal, dass Fahrzeuge nicht kreuzen können.
Sie soll jedoch von beiden Seiten überquert werden können. Es braucht somit eine
Synchronisation, damit die Fahrzeuge nicht kollidieren.
Um das Problem zu illustrieren wird eine fehlerhaft funktionierende Anwendung,
in welcher keine Synchronisierung vorgenommen wird, zur Verfügung gestellt.
Ihre Aufgabe ist es die Synchronisation der Fahrzeuge einzubauen.</p>
</div>
<div class="paragraph">
<p>Die Anwendung finden Sie im Ordner <code>handout/Bridge</code>.
Nach dem Kompilieren (z.B. mit <code>gradle build</code>) können Sie diese starten, in dem
Sie die Klasse <code>Main</code> ausführen (z.B. mit <code>gradle run</code>). Das GUI sollte
selbsterklärend sein. Mit den zwei Buttons können sie Autos links bzw. rechts
hinzufügen. Sie werden feststellen, dass die Autos auf der Brücke kollidieren.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/bridge_overview.png" alt="bridge overview" width="600px">
</div>
<div class="title">Figure 5. Single-Lane Bridge GUI</div>
</div>
<div class="paragraph">
<p>Um das Problem zu lösen müssen Sie die den GUI Teil der Anwendung nicht verstehen.
Sie müssen nur wissen, dass Fahrzeuge die von links nach rechts fahren
die Methode <code>controller.enterLeft()</code> aufrufen bevor sie auf die Brücke fahren
(um Erlaubnis fragen) und die Methode <code>controller.leaveRight()</code> aufrufen sobald
sie die Brücke verlassen. Fahrzeuge in die andere Richtung rufen entsprechend
die Methoden <code>enterRight()</code> und <code>leaveLeft()</code> auf.
Dabei ist <code>controller</code> eine Instanz der Klasse <code>TrafficController</code> welche für
die Synchronisation zuständig ist. In der mitgelieferte Klasse sind die vier
Methoden nicht implementiert (Dummy-Methoden).</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Bauen sie die Klasse <code>TrafficController</code> in einen Monitor um der sicherstellt,
dass die Autos nicht mehr kollidieren. Verwenden Sie dazu den Lock und Conditions
Mechanismus.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Verwenden Sie eine Statusvariable um den Zustand der Brücke zu repräsentieren
(e.g. <code>boolean bridgeOccupied</code>).
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Erweitern Sie die Klasse <code>TrafficController</code> so, dass jeweils abwechslungsweise
ein Fahrzeug von links und rechts die Brücke passieren kann. Unter Umständen wird
ein Auto blockiert, wenn auf der anderen Seite keines mehr wartet. Verwenden Sie
für die Lösung mehrere Condition Objekte.</p>
</li>
<li>
<p>Bauen Sie die Klasse <code>TrafficController</code> um, so dass jeweils alle wartenden
Fahrzeuge aus einer Richtung passieren können und erst wenn keines mehr wartet
die Gegenrichtung fahren kann.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Mit <a href="{ReentrantLock}"><code>ReentrentLock.hasWaiters(Condition c)</code></a> können Sie
abfragen ob Threads auf eine bestimmte Condition warten.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_the_dining_philosophers_pa">3.2. The Dining Philosophers [PA]</h3>
<div class="sidebarblock">
<div class="content">
<div class="title"><strong>Beschreibung des Philosophen-Problems:</strong></div>
<div class="paragraph">
<p>Fünf Philosophen sitzen an einem Tisch mit einer Schüssel, die immer genügend
Spaghetti enthält. Ein Philosoph ist entweder am Denken oder am Essen. Um zu
essen braucht er zwei Gabeln. Es hat aber nur fünf Gabeln. Ein Philosoph kann
zum Essen nur die neben ihm liegenden Gabeln gebrauchen. Aus diesen Gründen muss
ein Philosoph warten und hungern, solange einer seiner Nachbarn am Essen ist.</p>
</div>
</div>
</div>
<div class="openblock float-group">
<div class="content">
<div class="imageblock left">
<div class="content">
<img src="./images/philosopher-table-numbered.png" alt="philosopher table numbered" width="267px">
</div>
<div class="title">Figure 6. Philosopher Table</div>
</div>
<div class="imageblock left">
<div class="content">
<img src="./images/philosopher-ui.png" alt="philosopher ui" width="250px">
</div>
<div class="title">Figure 7. Philosopher UI</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Das zweite Bild zeigt die Ausgabe des Systems, das wir in dieser Aufgabe verwenden.
Die schwarzen Kreise stellen denkende Philosophen dar, die gelben essende und die
roten hungernde. Bitte beachten Sie, dass eine Gabel, die im Besitz eines
Philosophen ist, zu dessen Teller hin verschoben dargestellt ist.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Analysieren Sie die bestehende Lösung (<code>PhilosopherTable.java</code>),
die bekanntlich nicht Deadlock-frei ist. Kompilieren und starten Sie die Anwendung.
Nach einiger Zeit geraten die Philosophen in eine Deadlock-Situation und verhungern.
Überlegen Sie sich, wo im Code der Deadlock entsteht und versuchen Sie, dessen Auftreten schneller herbeizuführen.</p>
</li>
<li>
<p>Passen Sie die bestehende Lösung so an, dass keine Deadlocks mehr möglich sind.
Passen Sie den <code>ForkManager</code> so an, dass sich Gabelpaare
in einer <em>atomaren</em> Operation belegen bzw. freigegeben lassen.
Die GUI-Klasse müssen Sie nicht anpassen.
Die Änderungen an der Klasse <code>Philosoph</code> sind minimal, da sie nur den Methodenaufruf für die Freigabe bzw. Belegung der Gabeln ändern müssen.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Verwenden Sie für die Synchronisation Locks und Conditions!<br>
Testen Sie ihre Lösung auf Deadlock-Freiheit!
</td>
</tr>
</table>
</div>
</li>
<li>
<p>In der Vorlesung haben Sie mehrere Lösungsansätze kennen gelernt.
Erläutern Sie (theoretisch) wie implementiert werden könnte, wenn Sie den Deadlock über Nummerierung der Ressourcen verhindern möchten.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concurrency_4executor_framework_callables_and_futures">4. Concurrency 4&#8201;&#8212;&#8201;Executor Framework, Callables and Futures</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_theoretische_fragen_tu_2">4.1. Theoretische Fragen [TU]</h3>
<div class="paragraph">
<p>Im Unterricht haben sie verschieden Arten von Thread-Pools kennengelernt.
Welcher davon würde sich für die folgend Anwendungsfälle am Besten eignen?<br>
Wenn nötig, geben Sie auch die Konfiguration des Thread-Pools an.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Sie schreiben einen Server, der via Netzwerk Anfragen erhält. Jede Anfrage soll in einem eigenen Task beantwortet werden. Die Anzahl gleichzeitiger Anfragen schwankt über den Tag verteilt stark.</p>
</li>
<li>
<p>Ihr Graphikprogramm verwendet komplexe Mathematik um von hunderten von Objekten die Position, Geschwindigkeit und scheinbare Grösse (aus Sicht des Betrachters) zu berechnen und auf dem Bildschirm darzustellen.</p>
</li>
<li>
<p>Je nach Datenset sind unterschiedliche Algorithmen schneller in der Berechnung des Resultats (z.B. Sortierung). Sie möchten jedoch in jedem Fall immer so schnell wie möglich das Resultat haben und lassen deshalb mehrere Algorithmen parallel arbeiten.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_mandelbrot">4.2. Mandelbrot</h3>
<div class="paragraph">
<p>Die JavaFX-Anwendung <code>Mandelbrot</code> berechnet die Fraktaldarstellung eines Ausschnitts aus der <a href="https://de.wikipedia.org/wiki/Mandelbrot-Menge">Mandelbrot-Menge</a>.
Dazu wird die zeilenweise Berechnung auf mehrere Threads aufgeteilt.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Sie müssen die Mathematik hinter den Mandelbrotfraktalen nicht verstehen um die Aufgaben zu lösen.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In der abgegebenen Version werden die Threads noch "konventionell" erzeugt und beendet.
Der Benutzer kann wählen, wieviele Threads verwendet werden sollen.
Jedem Thread wird dann ein Block von Zeilen zugeteilt (startRow&#8230;&#8203;endRow), welcher diese berechnet und ausgibt.</p>
</div>
<div class="paragraph">
<p>Analysieren und testen Sie die Anwendung:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Mit welcher Anzahl Threads erhalten Sie auf Ihrem Rechner die besten Resultate?<br></p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Die Gesamtrechenzeit wird in der Konsole ausgegeben.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Wie interpretieren Sie das Resultat im Verhältnis zur Anzahl Cores ihres Rechners?</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_mandelbrot_executor_pa">4.2.1. Mandelbrot Executor [PA]</h4>
<div class="paragraph">
<p>Erstellen Sie eine Kopie der Klasse <code>Mandelbrot</code> mit Namen <code>MandelbrotExecutor</code>.</p>
</div>
<div class="paragraph">
<p>Bauen Sie die Anwendung um, so dass für das Management der Tasks ein <code>ExecutorService</code> mit einem Thread-Pool verwendet wird.</p>
</div>
<div class="sect4">
<h5 id="_hinweise">Hinweise:</h5>
<div class="ulist">
<ul>
<li>
<p>Die Methoden <code>start</code>, <code>startOrStopCalculation</code>, <code>taskFinished</code> und <code>drawOneRow</code> gehören zum GUI und sollten nicht verändert werden müssen.</p>
</li>
<li>
<p>Das Task-Management sollte durch Anpassen der Methoden <code>startTasks</code>, <code>stopTasks</code> und der Klasse <code>MandelbrotTask</code> erfolgen.</p>
</li>
<li>
<p>Überlegen Sie sich, welchen Typ von Thread-Pool hier sinnvollerweise verwendet wird.</p>
</li>
<li>
<p>Verwenden Sie den vom Benutzer gesetzten ThreadCount um die Grösse des Thread-Pools zu definieren.</p>
</li>
<li>
<p>Neu soll der <code>MandelbrotTask</code> nur noch eine Zeile berechnen und ausgeben.
Das heisst, es muss für die Berechnung jeder Zeile ein Task erzeugt und übermittelt werden, nicht mehr pro Zeilenblock.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mandelbrot_callable_pu">4.2.2. Mandelbrot Callable [PU]</h4>
<div class="paragraph">
<p>Erstellen Sie eine weitere Kopie mit dem Namen <code>MandelbrotCallable</code>.</p>
</div>
<div class="paragraph">
<p>Bauen Sie die Anwendung so um, dass <code>MandelbrotTask</code> ein Callable ist, welches eine Zeile berechnet und zurückgibt.</p>
</div>
<div class="sect4">
<h5 id="_hinweise_2">Hinweise:</h5>
<div class="ulist">
<ul>
<li>
<p>Wie in der vorherigen Aufgabe soll ein Task pro Zeile verwendet werden.</p>
</li>
<li>
<p>Die Ausgabe der Zeile erfolgt jetzt nach Abschluss der Berechnung im GUI-Thread.</p>
</li>
<li>
<p>Überlegen Sie sich welche Optionen Sie haben, um auf die Resultate zu warten und sicherzustellen, dass alle ausgegeben wurden.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_abschluss">Abschluss</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Stellen Sie sicher, dass die Pflichtaufgaben mittels <code>gradle run</code> gestartet werden können und pushen Sie die Lösung vor der Deadline in ihr Abgaberepository.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-04-06 12:23:34 +0200
</div>
</div>
</body>
</html>